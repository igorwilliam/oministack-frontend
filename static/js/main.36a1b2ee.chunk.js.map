{"version":3,"sources":["services/api.js","pages/Main/index.js","pages/Box/index.js","routes.js","App.js","index.js","assets/logo.svg"],"names":["api","axios","create","baseURL","Main","state","newBox","handleSubmit","_callee","e","response","regenerator_default","a","wrap","_context","prev","next","preventDefault","post","title","_this","sent","props","history","push","concat","data","_id","stop","handleInputChange","setState","target","value","react_default","createElement","id","onSubmit","this","src","logo","alt","placeholder","onChange","type","Component","Box","box","subscribeToNewFiles","match","params","io","socket","emit","on","console","log","Object","objectSpread","files","toConsumableArray","handleUpload","forEach","file","FormData","append","get","es","onDropAccepted","_ref","getRootProps","getInputProps","assign","className","map","key","href","url","md","size","color","distanceInWords","createdAt","Date","locale","pt","Routes","react_router_dom","basename","process","react_router","path","exact","component","App","routes","ReactDOM","render","src_App_0","document","getElementById","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.36a1b2ee.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst api = axios.create({\r\n    baseURL: 'https://oministack-b.herokuapp.com'\r\n})\r\n\r\nexport default api","import React, { Component } from 'react';\r\nimport api from '../../services/api'\r\n\r\nimport logo from '../../assets/logo.svg'\r\nimport './styles.css'\r\n\r\nexport default class Main extends Component {\r\n  state = {\r\n    newBox: ''\r\n  }\r\n\r\n  handleSubmit = async e => {\r\n    \r\n    //previne o comportamento pradrão do evento de clicar que seria recarregar a página\r\n    e.preventDefault()\r\n    const response = await api.post('boxes',{\r\n      title: this.state.newBox\r\n    })\r\n\r\n    this.props.history.push(`/box/${response.data._id}`)\r\n    //console.log(response.data)\r\n\r\n  }\r\n\r\n  handleInputChange = (e) => {\r\n    this.setState({\r\n      newBox: e.target.value\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <div id='main-container'>\r\n            <form onSubmit={this.handleSubmit}>\r\n                <img src={logo} alt=\"\"/>\r\n                <input \r\n                  placeholder=\"Criar um Box\" \r\n                  value={this.state.newBox}\r\n                  onChange={this.handleInputChange}\r\n                />\r\n                <button type=\"submit\">Criar</button>\r\n            </form>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport api from '../../services/api'\r\nimport {distanceInWords} from 'date-fns'\r\nimport pt from 'date-fns/locale/pt'\r\nimport Dropzone from 'react-dropzone'\r\nimport socket from 'socket.io-client'\r\n\r\nimport { MdInsertDriveFile } from 'react-icons/md'\r\n\r\n\r\nimport logo from '../../assets/logo.svg'\r\nimport './styles.css'\r\n\r\nexport default class Box extends Component {\r\n  state = {box: {}}\r\n\r\n  async componentDidMount(){\r\n    this.subscribeToNewFiles()\r\n\r\n    const box = this.props.match.params.id\r\n    const response = await api.get(`boxes/${box}`)\r\n\r\n    this.setState({box: response.data})\r\n  }\r\n\r\n  subscribeToNewFiles = () => {\r\n    const box = this.props.match.params.id\r\n    const io = socket('https://oministack-b.herokuapp.com')\r\n\r\n    io.emit('connectRoom', box)\r\n\r\n    io.on('file', data => {\r\n      console.log(data)\r\n      this.setState({box: {...this.state.box, files:[data, ...this.state.box.files]}})\r\n    })\r\n  }\r\n\r\n  handleUpload = (files) => {\r\n    files.forEach(file => {\r\n      const data = new FormData()\r\n      const box = this.props.match.params.id\r\n\r\n      data.append('file', file)\r\n\r\n      api.post(`boxes/${box}/files`, data)\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"box-container\">\r\n        <header>\r\n          <img src={logo} alt=\"\"/>\r\n          <h1>{this.state.box.title}</h1>\r\n        </header>\r\n\r\n        <Dropzone onDropAccepted={this.handleUpload}>\r\n          {({getRootProps, getInputProps}) => (\r\n            <div className='upload' {...getRootProps()}>\r\n              <input {...getInputProps()}/>\r\n              <p>Arraste arquivos ou clique aqui</p>\r\n            </div>\r\n          )}\r\n        </Dropzone>\r\n\r\n        <ul>\r\n\r\n          { this.state.box.files && this.state.box.files.map(file => (\r\n            <li key={file._id}>\r\n              <a className='fileInfo' href={file.url} target='blank'>\r\n                <MdInsertDriveFile size={24} color=\"#A5Cfff\"/>\r\n                <strong>{file.title}</strong>\r\n              </a>\r\n  \r\n              <span>\r\n                há{\" \"}\r\n                {distanceInWords(file.createdAt, new Date(), {\r\n                locale: pt\r\n              }) }</span>\r\n            </li>\r\n          )) }\r\n\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport {BrowserRouter, Route, Switch} from 'react-router-dom'\r\n\r\nimport Main from './pages/Main'\r\nimport Box from './pages/Box'\r\n\r\nconst Routes = () => (\r\n    <BrowserRouter basename={process.env.PUBLIC_URL}\r\n    >\r\n        <Switch>\r\n            <Route path='/' exact component={Main}/>\r\n            <Route path='/box/:id' component={Box}/>\r\n            <Route component={() => (<div>404 Not found </div>)} />\r\n\r\n        </Switch>\r\n    </BrowserRouter>\r\n)\r\n\r\nexport default Routes","import React from 'react';\r\nimport './App.css'\r\n\r\nimport Routes from './routes'\r\n\r\nconst App = () => <Routes/>\r\n\r\n\r\nexport default App\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n","module.exports = __webpack_public_path__ + \"static/media/logo.2e06992f.svg\";"],"sourceRoot":""}